<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Flights</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/3d59e7110b.js" crossorigin="anonymous"></script>
</head>
<body>
     <header>
        <div class="logo">
            <a href="index.html">
             <img src="./flights-imges/shaar.png" alt="">
            </a>
        </div>
        <nav>
            <ul class="nav-links" id="small-sc">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a class="active" href="all-flights.html">Flights</a></li>
            </ul>
            <div class="borgar-icon">
                <span class="sp-borgar"></span>
                <span class="sp-borgar"></span>
                <span class="sp-borgar"></span>
            </div>
        </nav>
    </header> 

    <main class="all-flights">
        <section class="special-landing">
            <h1>All Flights</h1>
            <p>Your trusted partner for affordable flights worldwide.</p>
        </section>

        <section id="flights" class="flights">
        <div class="all-head">
            <h2>Available Flights This Week</h2>
            <p>Exclusive deals from your trusted airline agent. Contact me on Whatsapp for instant booking!</p>
        </div>
        <div class="filter">
            <h4><i class="fa-solid fa-filter"></i>Filter Flights</h4>
            <ul class="filter-nav">
                <li data-filter="all" class="active">All</li>
                <li data-filter="Tarco">Tarco</li>
                <li data-filter="Badr">Badr</li>
                <li data-filter="Sudaner">Sudaner</li>
            </ul>
        </div>
         <div class="cards">
         <template id="template">
            <article class="flight-card">
                <div class="row-one">
                    <div>
                    <i class="fa-solid fa-plane-departure" ></i>
                        <span class="flight-number">BA117</span>
                    </div>
                    <div>
                        <div class="cls"></div>
                    </div>
                </div>
                <div class="row-two">
                    <p><span class="from">New York (JFK)</span><br>From</p>
                    <i class="fa-solid fa-plane-up fa-rotate-by" style="--fa-rotate-angle: 45deg;"></i>
                    <p id="to"><span class="to">London (LHR)</span><br>To</p>
                </div>
                <div class="row-three">
                    <div>
                        <i class="fa-regular fa-calendar"></i>
                        <p><span class="date">Thu, Feb 15</span><br>Date</p>
                    </div>
                    <div class="time-div">
                        <i class="fa-regular fa-clock"></i>
                        <p><span class="move-time">21:30</span><br><span class="time duration">7h 20m</span></p>
                    </div>
                </div>
                <div class="row-four">
                    <h3><span class="airline">British Airways</span><br>Airline</h3>
                    <h3><span class="dollar">$</span><span class="price">$899</span><br>Total Price</h3>
                </div>
                <button class="book">Book Now</button>
            </article>
            </template>
        </div>
    </section>
    </main>


     <footer>
        <div class="content">
            <div class="one">
            <h3><img src="./flights-imges/shaar.png" alt="">SkyWing</h3>
            <p>Your trusted partner for affordable flights worldwide. We make travel 
            dreams come true with the best deals and customer service.
            </p>
            <div class="social">
                <i class="fa-brands fa-facebook-f"></i>
                <i class="fa-brands fa-square-x-twitter"></i>
                <i class="fa-brands fa-instagram"></i>
            </div>
            </div>
            <div class="two">
                <h4>Quick Links</h4>
                <ul>
                    <li>About Us</li>
                    <li>Flight Status</li>
                    <li>Baggage Info</li>
                    <li>Check-in</li>
                    <li>Travel Guides</li>
                </ul>
            </div>
            <div class="three">
                <h4>Support</h4>
                <ul>
                    <li>Help Center</li>
                    <li>Contact Us</li>
                    <li>Refund Policy</li>
                    <li>Terms of Service</li>
                    <li>Privacy Policy</li>
                </ul>
            </div>
            <div class="four">
                <h4>Contact Info</h4>
                <h5><i class="fa-solid fa-phone"></i>+1-800-FLIGHT</h5>
                <h5><i class="fa-solid fa-envelope"></i>support@flightbooker.com</h5>
                <p><i class="fa-solid fa-location-dot"></i>123 Travel Street New York, NY 10001</p>
            </div>
        </div>
        
        <div class="footer">
            <p><span><i class="fa-regular fa-copyright"></i><span class="cRight"></span><span class="skyWing">SkyWing</span>.All rights reserved.</p>
            <ul>
                <li>Privacy Policy</li>
                <li>Terms of Service</li>
                <li>Cookie Policy</li>
            </ul>
        </div>
    </footer>
    
    <script type="module">
        //////////// Borgar Menu /////////////
        const ulNav = document.getElementById("small-sc");
        const links = document.querySelector(".nav-links a")

        document.body.addEventListener("click", (e) => {
            if (e.target.className === "sp-borgar"){
                ulNav.classList.toggle("sm-sc")
            } else {
                if (ulNav.classList.contains("sm-sc"))
                    ulNav.classList.toggle("sm-sc")
            }
        })
        //fetch data from json file
        const flightPromise = await fetch("data.json")
        const flightsData = await flightPromise.json();


        const template = document.getElementById("template")
        const wrapper = document.createElement("div");
        wrapper.className = "wrapper";
        flightsData.forEach(flight => {
            const clone = template.content.cloneNode(true);
            clone.querySelector(".from").textContent = flight.from;
            clone.querySelector(".to").textContent = flight.to;
            clone.querySelector(".airline").textContent = flight.airline;
            clone.querySelector(".date").textContent = flight.date;
            clone.querySelector(".move-time").textContent = flight.time;
            clone.querySelector(".duration").textContent = flight.duration;
            clone.querySelector(".price").textContent = flight.price;
            clone.querySelector(".flight-number").textContent = flight.flightNumber;
            clone.querySelector(".cls").textContent = flight.cls;
            wrapper.appendChild(clone);
        });
        document.querySelector(".cards").appendChild(wrapper);


        let filterBtns = document.querySelectorAll(".filter-nav li");

        filterBtns.forEach(e => {
            e.addEventListener("click", e => handleFilterClick(e))
        })

        //function to handle filters
        function handleFilterClick(e) {
            let target = e.target;
            e.preventDefault();

            filterBtns.forEach(e => {
                e.classList.remove("active")
            })
            target.classList.add("active")

            filterFlights(target.dataset.filter);
        }
        // filter flights
        function filterFlights(flight){
            const allFlights = document.querySelectorAll(".flight-card")
            if (flight == "all") {
                allFlights.forEach(el => {
                    el.style.display = ""
                })
            } else {
                allFlights.forEach(el => {
                    if (el.querySelector(".airline").textContent == flight) {
                        el.style.display = ""
                    } else {
                        el.style.display = "none"
                    }
                })
            }
        }


        // footer with current time
        const copyRight = new Date(); 
        document.querySelector(".cRight").textContent = copyRight.getFullYear()

    </script>
</body>
</html>